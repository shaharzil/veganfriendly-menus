(function(t){function e(e){for(var i,o,a=e[0],c=e[1],u=e[2],l=0,p=[];l<a.length;l++)o=a[l],s[o]&&p.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},s={app:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/veganfriendly-menu/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var d=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1c21":function(t,e,n){},2369:function(t,e,n){"use strict";var i=n("1c21"),s=n.n(i);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],o=n("2877"),a={},c=Object(o["a"])(a,s,r,!1,null,null,null),u=c.exports,d=(n("20d6"),n("96cf"),n("3b8d")),l=n("5176"),p=n.n(l),m=(n("7514"),n("db0c")),f=n.n(m),v=(n("55dd"),n("ac6a"),n("2f62")),h=n("795b"),g=n.n(h),_=n("bc3a"),y=n.n(_),b=(n("3e8f"),"https://app.vegan-friendly.co.il"),I={login:"admin",password:"Fri3ndlyv3gaN"},w=314,x=[{id:1,name:"Cozy Vegan Eatery",num:3},{id:2,name:"good pizza place",num:5},{id:3,name:"good burger place",num:5},{id:4,name:"rainbow",num:4},{id:5,name:"shuffle",num:2},{id:6,name:"noodels place",num:0},{id:7,name:"i love food",num:1}],S=[{id:1,restaurant_id:1,section_id:3,name:"Vegan Pizza",description:"Pizza with Vegan Cheese",price:75},{id:2,restaurant_id:1,section_id:1,name:"fries",description:"good yumi fries",price:18},{id:3,restaurant_id:4,section_id:3,name:"bitburger",description:"burger from mushrooms, soy and bit",price:38},{id:4,restaurant_id:4,section_id:3,name:"rainburger",description:"burger from mushrooms and soy",price:38},{id:5,restaurant_id:4,section_id:2,name:"ice cream",description:"Pizza with Vegan Cheese",price:75},{id:6,restaurant_id:6,section_id:3,name:"Vegan Pizza",description:"Pizza with Vegan Cheese",price:75}],$=[{id:1,title:"Appetizers",position:1},{id:2,title:"Desserts",position:5},{id:3,title:"Main Courses",position:3}];function C(){return w++}function k(){return g.a.resolve(x)}function R(){return y.a.post("".concat(b,"/admin/login"),I).then(function(t){var e=t.data;e}).catch(function(t){})}function O(t){return g.a.resolve(S.filter(function(e){return e.restaurant_id===t}).slice())}function P(){return g.a.resolve($.sort(function(t,e){return t.position-e.position}))}function j(t,e){return g.a.resolve("succses")}var M={login:R,getRests:k,getRestItems:O,makeId:C,getSections:P,saveCanges:j};i["a"].use(v["a"]);var N=new v["a"].Store({state:{rests:[],selectedRest:null,restItems:[],sections:[]},mutations:{setRests:function(t,e){var n=e.rests;t.rests=n},setRest:function(t,e){var n=e.rest,i=e.items;t.selectedRest=n,t.restItems=i},setSections:function(t,e){var n=e.sections;t.sections=n},setItems:function(t,e){var n=e.restItems;t.restItems=n},addSection:function(t,e){var n=e.newSection;t.sections.push(n)},changeSectionName:function(t,e){var n=e.sectionIdx,i=e.section;t.sections[n].title=i.title},changeSection:function(t,e){var n=e.sectionIdx,i=e.section;t.restItems.forEach(function(e){e.section_id===i.id&&(e.section_id=t.sections[n].id)})}},getters:{rests:function(t){var e=t.rests;return e},rest:function(t){var e=t.selectedRest;return e},itemsForDisplay:function(t){var e=t.restItems,n=t.sections;return f()(e.reduce(function(t,e){if(t[e.section_id])t[e.section_id].items.push(e);else{var i=n.find(function(t){var n=t.id;return n===e.section_id});t[e.section_id]=p()({},i,{items:[e]})}return t},{})).sort(function(t,e){return t.position-e.position})},sections:function(t){var e=t.sections;return e}},actions:{loadRests:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,M.getRests();case 3:i=t.sent,n({type:"setRests",rests:i});case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),loadSections:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,M.getSections();case 3:i=t.sent,i.sort(function(t,e){return t.position-e.position}),n({type:"setSections",sections:i});case 6:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),setRest:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e,n){var i,s,r,o,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.commit,s=e.state,r=n.restId,t.next=4,M.getRestItems(r);case 4:o=t.sent,a=s.rests.find(function(t){var e=t.id;return e===r}),i({type:"setRest",rest:a,items:o});case 7:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),saveCanges:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e,n){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.state,s=n.restId,t.prev=2,t.next=5,M.saveCanges(s,i.restItems);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[2,7]])}));function e(e,n){return t.apply(this,arguments)}return e}(),addSection:function(t){var e=t.commit,n=t.state,i=t.dispatch,s={id:M.makeId(),title:"",position:n.sections[n.sections.length-1].position+1};e({type:"addSection",newSection:s}),i({type:"addItem",sectionId:s.id})},deleteItem:function(t,e){var n=t.commit,i=t.state,s=e.itemId,r=i.restItems.filter(function(t){var e=t.id;return e!==s});n({type:"setItems",restItems:r})},addItem:function(t,e){var n=t.commit,i=t.state,s=e.sectionId,r={section_id:s,title:"Item name",description:"item description",price:0},o=i.restItems.slice();o.push(r),n({type:"setItems",restItems:o})},deleteSection:function(t,e){var n=t.commit,i=t.state,s=e.sectionId,r=i.restItems.filter(function(t){var e=t.section_id;return e!==s});n({type:"setItems",restItems:r})},editItem:function(t,e){var n=t.commit,i=t.state,s=e.item,r=i.restItems.findIndex(function(t){var e=t.id;return s.id===e}),o=i.restItems.slice();o.splice(r,1,s),n({type:"setItems",restItems:o})},changeSectionName:function(t,e){var n=t.commit,i=t.state,s=e.section,r=i.sections.findIndex(function(t){var e=t.title;return e===s.title});-1===r?(r=i.sections.findIndex(function(t){var e=t.id;return e===s.id}),n({type:"changeSectionName",sectionIdx:r,section:s})):n({type:"changeSection",sectionIdx:r,section:s})}}}),z=n("8c4f"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"columns"},[n("restsPanel",{attrs:{restaurants:t.restaurants}}),n("router-view")],1)},D=[],q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"is-one-quarter column"},[n("p",{staticClass:"panel-heading"},[t._v("restaurants")]),n("div",{staticClass:"panel-block"},[n("p",{staticClass:"control has-icons-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"input is-small",attrs:{type:"text",placeholder:"search"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._m(0)])]),t._l(t.restsToDisplay,function(e){return n("a",{key:e.id,staticClass:"panel-block rest-wrapper",on:{click:function(n){return t.openMenu(e.id)}}},[t._v("\n    "+t._s(e.name)+"\n    "),n("span",{staticClass:"panel-icon edit-icon",on:{click:function(n){return n.stopPropagation(),t.editMenu(e.id)}}},[t._v("ערוך")])])})],2)},F=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon is-small is-left"},[n("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])}],V=(n("6762"),n("2fdb"),n("7f7f"),{props:["restaurants"],data:function(){return{query:""}},methods:{openMenu:function(t){this.$router.push("/rest/".concat(t))},editMenu:function(t){this.$router.push("/rest/".concat(t,"/edit"))}},computed:{restsToDisplay:function(){var t=this;return this.restaurants.filter(function(e){var n=e.name;return n.includes(t.query)})}}}),J=V,T=(n("f94d"),Object(o["a"])(J,q,F,!1,null,"fafc6d76",null)),A=T.exports,B={name:"home",created:function(){this.$store.dispatch("loadRests"),this.$store.dispatch("loadSections")},components:{restsPanel:A},computed:{restaurants:function(){return this.$store.getters.rests}}},G=B,H=Object(o["a"])(G,E,D,!1,null,"279595f3",null),K=H.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rest&&t.itemsForDisplay?n("section",{staticClass:"column card"},[n("header",{staticClass:"panel-heading"},[n("span",[t._v("שם המסעדה: "+t._s(t.rest.name))]),t.isEditMode?n("button",{on:{click:function(e){return t.saveCanges()}}},[t._v("עדכן")]):t._e()]),t.isEditMode?n("div",[t._l(t.itemsForDisplay,function(t){return n("edit-section",{key:t.id,attrs:{section:t}})}),n("button",{staticClass:"add-category",on:{click:function(e){return t.addSection()}}},[n("span",[t._v("+")])])],2):n("div",t._l(t.itemsForDisplay,function(t){return n("menu-section",{key:t.id,attrs:{section:t}})}),1),n("div")]):t._e()},Q=[],U=n("f499"),W=n.n(U),X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h2",{staticClass:"title"},[t._v(t._s(t.section.title))]),t.section.items.length?n("div",[n("table",{staticClass:"table is-hoverable is-fullwidth"},[t._m(0),n("tbody",t._l(t.section.items,function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.description))]),n("td",[t._v(t._s(e.price))])])}),0)])]):n("h2",[t._v("אין מנות בקטגוריה זו")])])},Y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("שם המנה")]),n("th",[t._v("תיאור")]),n("th",[t._v("מחיר")])])])}],Z={props:["section"]},tt=Z,et=(n("7625"),Object(o["a"])(tt,X,Y,!1,null,"65e334c4",null)),nt=et.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"title-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.section.title,expression:"section.title"}],staticClass:"title",attrs:{list:"titles",placeholder:"הכנס שם קטגוריה"},domProps:{value:t.section.title},on:{change:function(e){return t.changeSectionName(t.section)},input:function(e){e.target.composing||t.$set(t.section,"title",e.target.value)}}}),n("datalist",{staticClass:"title",attrs:{id:"titles"}},t._l(t.sections,function(t){return n("option",{key:t.id,domProps:{value:t.title}})}),0)]),t.section.items.length?n("div",[n("table",{staticClass:"table is-hoverable is-fullwidth"},[t._m(0),n("tbody",t._l(t.sectionItems,function(e){return n("tr",{key:e.id},[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],attrs:{type:"text",placeholder:"enter item name"},domProps:{value:e.name},on:{input:[function(n){n.target.composing||t.$set(e,"name",n.target.value)},function(n){return t.editItem(e)}]}})]),n("td",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"item.description"}],attrs:{type:"text",placeholder:"enter description"},domProps:{value:e.description},on:{input:function(n){n.target.composing||t.$set(e,"description",n.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],attrs:{type:"text",placeholder:"enter price"},domProps:{value:e.price},on:{input:function(n){n.target.composing||t.$set(e,"price",n.target.value)}}})]),n("a",{staticClass:"delete is-medium",on:{click:function(n){return t.deleteItem(e.id)}}})])}),0)])]):t._e(),n("button",{on:{click:function(e){return t.addItem()}}},[t._v("add item")]),n("button",{on:{click:function(e){return t.deleteSection()}}},[t._v("delete category")])])},st=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("שם המנה")]),n("th",[t._v("תיאור")]),n("th",[t._v("מחיר")])])])}],rt=(n("3c43"),{props:["section"],data:function(){return{sectionItems:JSON.parse(W()(this.section.items))}},methods:{deleteItem:function(t){this.$store.dispatch({type:"deleteItem",itemId:t})},addItem:function(){this.$store.dispatch({type:"addItem",sectionId:this.section.id})},deleteSection:function(){this.$store.dispatch({type:"deleteSection",sectionId:this.section.id})},editItem:function(t){this.$store.dispatch({type:"editItem",item:t})},changeSectionName:function(t){this.$store.dispatch({type:"changeSectionName",section:t})}},computed:{sections:function(){return this.$store.getters.sections}},watch:{section:function(){this.sectionItems=JSON.parse(W()(this.section.items))}}}),ot=rt,at=(n("2369"),Object(o["a"])(ot,it,st,!1,null,"6352bcde",null)),ct=at.exports,ut={created:function(){this.setMenu()},computed:{restId:function(){return+this.$route.params.id},isEditMode:function(){return!!this.$route.params.edit},rest:function(){return this.$store.getters.rest},itemsForDisplay:function(){return JSON.parse(W()(this.$store.getters.itemsForDisplay))}},methods:{setMenu:function(){this.$store.dispatch({type:"setRest",restId:this.restId})},addSection:function(){this.$store.dispatch({type:"addSection"})},saveCanges:function(){this.$store.dispatch({type:"saveCanges",restId:this.restId})}},watch:{restId:function(){this.setMenu()}},components:{menuSection:nt,editSection:ct}},dt=ut,lt=(n("ebab"),Object(o["a"])(dt,L,Q,!1,null,"b61f333e",null)),pt=lt.exports;i["a"].use(z["a"]);var mt=new z["a"]({routes:[{path:"/",name:"home",component:K,children:[{path:"rest/:id",component:pt},{path:"rest/:id/:edit",component:pt}]}]});n("abe2"),i["a"].config.productionTip=!1,new i["a"]({router:mt,store:N,render:function(t){return t(u)}}).$mount("#app")},7625:function(t,e,n){"use strict";var i=n("dd8a"),s=n.n(i);s.a},abe2:function(t,e,n){},c665:function(t,e,n){},dd8a:function(t,e,n){},e4b5:function(t,e,n){},ebab:function(t,e,n){"use strict";var i=n("e4b5"),s=n.n(i);s.a},f94d:function(t,e,n){"use strict";var i=n("c665"),s=n.n(i);s.a}});
//# sourceMappingURL=app.6f818a37.js.map